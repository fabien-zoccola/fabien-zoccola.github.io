import{R as e}from"./index-fe8be053.js";function t(t){let n=!0,o=!1,i=null,d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(t){e.style.setProperty("--focus-enabler","1"),t.hasAttribute("is-focus-visible")||t.setAttribute("is-focus-visible","")}function u(e){n=!1}function r(){document.addEventListener("mousemove",m),document.addEventListener("mousedown",m),document.addEventListener("mouseup",m),document.addEventListener("pointermove",m),document.addEventListener("pointerdown",m),document.addEventListener("pointerup",m),document.addEventListener("touchmove",m),document.addEventListener("touchstart",m),document.addEventListener("touchend",m)}function m(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(n=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mousedown",m),document.removeEventListener("mouseup",m),document.removeEventListener("pointermove",m),document.removeEventListener("pointerdown",m),document.removeEventListener("pointerup",m),document.removeEventListener("touchmove",m),document.removeEventListener("touchstart",m),document.removeEventListener("touchend",m),e.style.setProperty("--focus-enabler","0"))}document.addEventListener("keydown",(function(e){e.metaKey||e.altKey||e.ctrlKey||(s(t.activeElement),n=!0)}),{passive:!0}),document.addEventListener("mousedown",u,!0),document.addEventListener("pointerdown",u,!0),document.addEventListener("touchstart",u,!0),document.addEventListener("visibilitychange",(function(e){"hidden"===document.visibilityState&&(o&&(n=!0),r())}),!0),r(),t.addEventListener("focus",(function(e){var t,o,i;(n||(t=e.target,o=t.type,"INPUT"===(i=t.tagName)&&d[o]&&!t.readOnly||"TEXTAREA"===i&&!t.readOnly||t.isContentEditable))&&s(e.target)}),!0),t.addEventListener("blur",(function(e){var t;e.target.hasAttribute("is-focus-visible")&&(o=!0,window.clearTimeout(i),i=window.setTimeout((function(){o=!1}),100),(t=e.target).hasAttribute("is-focus-visible")&&t.removeAttribute("is-focus-visible"))}),!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("is-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&document.documentElement.setAttribute("data-nu-focus-visible","")}if("undefined"!=typeof window&&"undefined"!=typeof document){let e;window.applyFocusVisiblePolyfill=t;try{e=new CustomEvent("focus-visible-polyfill-ready")}catch(t){e=document.createEvent("CustomEvent"),e.initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(e)}"undefined"!=typeof document&&t(document);export{t as applyFocusVisiblePolyfill};
